javascript:(function()%7B%2F%2F%2F%20customizable%20variables%0A%2F%2F%2F%20Go%20to%20https%3A%2F%2Fkeycode.info%2F%20to%20find%20keycodes%20%0A%0Avar%20createNoteKeyCode%20%3D%2049%20%3B%20%20%2F%2F%20corresponds%20to%201%20on%20keyboard%0Avar%20saveAnnotationsKeyCode%3D%2050%3B%20%2F%2F%20corresponds%20to%202%20on%20keyboard%0Avar%20loadAnnotationsKeyCode%3D51%20%3B%20%2F%2F%20corresponds%20to%203%20on%20keyboard%0Avar%20startmqttKeyCode%3D52%20%3B%20%2F%2F%20corresponds%20to%204%20on%20keyboard%0A%0A%2F%2F%20controls%20the%20specs%20of%20the%20notes%0Avar%20defaultNoteColor%20%3D%20%22%23ffffcc%22%3B%0Avar%20defaultFont%3D%20%2213px%22%3B%0Avar%20defaultOpacity%20%3D%20%2280%25%22%3B%0A%0A%0A%0A%0A%2F%2F%2F%2F%2F%2F%2F%2F%20Importing%20libraries%20%20%2F%2F%2F%2F%2F%2F%2F%2F%2F%0Avar%20importJs%3Dfunction(type%2C%20url)%7B%0A%20%20var%20s%3Ddocument.createElement(%22script%22)%3B%0A%20%20s.setAttribute(%22type%22%2Ctype)%3B%0A%20%20s.setAttribute(%22src%22%2Curl)%3B%0A%20%20s.setAttribute(%22async%22%2Cfalse)%3B%0A%20%20document.body.appendChild(s)%3B%0A%7D%3B%0A%2F%2F%20Libraries%3A%20jquery%20%2C%20popper%2C%20notify%20and%20pell%20%20%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%0AimportJs(%22text%2Fjavascript%22%2C%20%22https%3A%2F%2Fcdnjs.cloudflare.com%2Fajax%2Flibs%2Fjquery%2F3.6.0%2Fjquery.min.js%22)%3B%0AimportJs(%22text%2Fjavascript%22%2C%20%22https%3A%2F%2Fcdnjs.cloudflare.com%2Fajax%2Flibs%2Fjqueryui%2F1.12.1%2Fjquery-ui.min.js%22)%3B%0AimportJs(%22text%2Fjavascript%22%2C%20%22https%3A%2F%2Fcdnjs.cloudflare.com%2Fajax%2Flibs%2Fjquery-cookie%2F1.4.1%2Fjquery.cookie.min.js%22)%3B%0AimportJs(%22text%2Fcss%22%20%20%20%20%20%20%20%2C%20%22https%3A%2F%2Fcdnjs.cloudflare.com%2Fajax%2Flibs%2Fjqueryui%2F1.12.1%2Fjquery-ui.min.css%22)%3B%0AimportJs(%22text%2Fjavascript%22%2C%20%22https%3A%2F%2Funpkg.com%2F%40popperjs%2Fcore%402%22)%3B%20%2F%2F%20popper%20helps%20in%20aligning%20the%20annotations%0AimportJs(%22text%2Fjavascript%22%2C%20%22https%3A%2F%2Fcdnjs.cloudflare.com%2Fajax%2Flibs%2Fpell%2F1.0.6%2Fpell.min.js%22)%3B%2F%2F%20pell-%20text%20editor%0AimportJs(%22text%2Fcss%22%20%20%20%20%20%20%20%2C%20%22https%3A%2F%2Fcdnjs.cloudflare.com%2Fajax%2Flibs%2Fpell%2F1.0.6%2Fpell.css%22)%3B%0AimportJs(%22text%2Fjavascript%22%2C%20%22https%3A%2F%2Fcdnjs.cloudflare.com%2Fajax%2Flibs%2Fnotify%2F0.4.2%2Fnotify.min.js%22)%3B%0A%0A%0A%0A%2F%2F%2F%2F%2F%2F%2F%20variables%20used%20%2F%2F%2F%2F%2F%2F%2F%2F%2F%0Avar%20note_count%3D1%3B%0Avar%20webPageUrl%20%3D%20window.location.href.replace(%2F(%5E%5Cw%2B%3A%7C%5E)%5C%2F%5C%2F%2F%2C%20'')%3B%0A%0A%2F%2F%20MQTT%20variables%20%2F%2F%0Avar%20broker%20%3D%20%7B%0A%20%20hostname%3A%20''%2C%0A%20%20port%3A%20''%0A%7D%3B%0A%2F%2F%20MQTT%20client%3A%0Avar%20client%3B%0A%2F%2F%20client%20credentials%3A%0Avar%20creds%20%3D%20%7B%0A%20%20clientID%3A%20%22wsbrowser_%22%2Bnew%20Date().getUTCMilliseconds()%2C%0A%20%20userName%3A%20''%2C%0A%20%20password%3A%20''%0A%7D%3B%0A%2F%2F%20topic%20to%20subscribe%20to%20when%20you%20connect%3A%0Avar%20topic%20%3D%20''%3B%0A%0A%0A%0A%0A%0Adocument.addEventListener('keydown'%2C%20workerFunction)%3B%20%20%0Afunction%20workerFunction(e)%7B%0A%20%20%20%20%0A%20%20%20%20var%20toggleHighlight%3D%20false%3B%0A%0A%20%20%20%20if(e.ctrlKey)%7B%0A%20%20%20%20%20%20%20%20%2F%2F%2F%2F%2F%2F%20mqtt%20-block%20%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%0A%20%20%20%20%20%20%20%20%2F%2F%2F%2F%20initialize%20and%20run%20mqtt%20on%20hitting%20the%20Ctrl%2B4-key%0A%20%20%20%20%20%20%20%20if(e.keyCode%3D%3DstartmqttKeyCode)%7B%20%0A%0A%20%20%20%20%20%20%20%20var%20mqtt%20%3D%20document.createElement('script')%3B%0A%20%20%20%20%20%20%20%20mqtt.src%3D%22https%3A%2F%2Fcdnjs.cloudflare.com%2Fajax%2Flibs%2Fpaho-mqtt%2F1.1.0%2Fpaho-mqtt.min.js%22%3B%0A%20%20%20%20%20%20%20%20mqtt.type%3D%22text%2Fjavascript%22%3B%0A%20%20%20%20%20%20%20%20mqtt.async%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20mqtt.onload%3D%20load%3B%20%2F%2FConnect%20to%20broker%20only%20after%20loading%20the%20module%0A%20%20%20%20%20%20%20%20document.head.appendChild(mqtt)%3B%0A%0A%20%20%20%20%20%20%20%20if(confirm(%22Use%20default%20mqtt%20server%20values%3F%22))%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20MQTT%20client%20details%3A%0A%20%20%20%20%20%20%20%20broker.hostname%20%3D%20'public.cloud.shiftr.io'%3B%2F%2F'public.cloud.shiftr.io'%2C'public.cloud.shiftr.io'%0A%20%20%20%20%20%20%20%20broker.port%3D%20'443'%3B%2F%2F443%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20client%20credentials%3A%0A%20%20%20%20%20%20%20%20creds.userName%20%3D'public'%3B%0A%20%20%20%20%20%20%20%20creds.password%20%3D%20'public'%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20topic%20to%20subscribe%20to%20when%20you%20connect%3A%0A%20%20%20%20%20%20%20%20topic%20%3D%20%20'notes'%3B%20%20%20%0A%20%20%20%20%20%20%20%20%7D%20%20%20%0A%20%20%20%20%20%20%20%20else%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20MQTT%20client%20details%3A%0A%20%20%20%20%20%20%20%20broker.hostname%20%3D%20%20prompt(%22Enter%20hostname%3A%20%22%2C'public.cloud.shiftr.io')%3B%2F%2F'public.cloud.shiftr.io'%2C'public.cloud.shiftr.io'%0A%20%20%20%20%20%20%20%20broker.port%3D%20prompt(%22Enter%20port%3A%20%22%2C'443')%3B%2F%2F443%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20client%20credentials%3A%0A%20%20%20%20%20%20%20%20creds.userName%20%3D%20prompt(%22Username%3A%20%22%2C'public')%3B%0A%20%20%20%20%20%20%20%20creds.password%20%3D%20%20prompt(%22Password%3A%20%22%2C'public')%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20topic%20to%20subscribe%20to%20when%20you%20connect%3A%0A%20%20%20%20%20%20%20%20topic%20%3D%20%20prompt(%22Topic%3A%20%22%2C'notes')%3B%0A%0A%20%20%20%20%20%20%20%20%7D%20%0A%0A%20%20%20%20%20%20%20%20%24.notify(%22connecting%20to%20server...%22%2C%22info%22)%0A%0A%0A%20%20%20%20%20%20%20%20function%20load()%7B%0A%20%20%20%20%20%20%20%20%20%20client%20%3D%20new%20Paho.Client(broker.hostname%2C%20Number(broker.port)%2C%20creds.clientID)%3B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20set%20callback%20handlers%20for%20the%20client%3A%0A%20%20%20%20%20%20%20%20%20%20client.onConnectionLost%20%3D%20onConnectionLost%3B%0A%20%20%20%20%20%20%20%20%20%20client.onMessageArrived%20%3D%20onMessageArrived%3B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20connect%20to%20the%20MQTT%20broker%3A%0A%20%20%20%20%20%20%20%20%20%20client.connect(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20onSuccess%3A%20onConnect%2C%20%20%20%20%20%20%20%2F%2F%20callback%20function%20for%20when%20you%20connect%0A%20%20%20%20%20%20%20%20%20%20%20%20userName%3A%20creds.userName%2C%20%20%20%2F%2F%20username%0A%20%20%20%20%20%20%20%20%20%20%20%20password%3A%20creds.password%2C%20%20%20%2F%2F%20password%0A%20%20%20%20%20%20%20%20%20%20%20%20useSSL%3A%20true%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20use%20SSL%0A%20%20%20%20%20%20%20%20%20%20%20%20cleanSession%20%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20onFailure%20%3A%20onFailedConnect%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20keepAliveInterval%20%3A%2010%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20reconnect%20%3A%20true%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20called%20when%20the%20client%20connects%0A%20%20%20%20%20%20%20%20function%20onConnect()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%24.notify('client%20is%20connected'%2C%20%22success%22)%3B%0A%20%20%20%20%20%20%20%20%20%20console.log('MQTT%3A%20Connected')%3B%0A%20%20%20%20%20%20%20%20%20%20client.subscribe(topic)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20called%20when%20the%20client%20connects%0A%20%20%20%20%20%20%20%20function%20onFailedConnect()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%24.notify('MQTT%3A%20Cannot%20connect%20to%20broker'%2C%20%22error%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20client%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20called%20when%20the%20client%20loses%20its%20connection%0A%20%20%20%20%20%20%20%20function%20onConnectionLost(response)%20%7B%0A%20%20%20%20%20%20%20%20%20%20console.log('MQTT%3A%20Disonnected')%3B%20%20%0A%20%20%20%20%20%20%20%20%20%20if%20(response.errorCode%20!%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24.notify('onConnectionLost%3A'%20%2B%20response.errorMessage%2C%20%22error%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%0A%0A%0A%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20called%20when%20a%20message%20arrives%0A%20%20%20%20%20%20%20%20function%20onMessageArrived(message)%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20receivedMessage%20%3D%20JSON.parse(message.payloadString.toString())%3B%0A%20%20%20%20%20%20%20%20%20%20if(receivedMessage%5BwebPageUrl%2B'-clientid'%20%5D!%3Dcreds.clientID)%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20annotateReceivedMessage(receivedMessage)%3B%20%20%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%24.notify('MQTT%3A%20Received%3A'%20%2B%20message.payloadString%2C%20%22info%22)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20called%20when%20you%20want%20to%20send%20a%20message%3A%0A%20%20%20%20%20%20%20%20%2F%2Fhttps%3A%2F%2Fgist.github.com%2Fjenschr%2F0732777a2f512ae281466961cdb60137%0A%20%20%20%20%20%20%20%20function%20sendMqttMessage(payload)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(client.isConnected())%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20dict_message%20%3D%20%7B%7D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20dict_message%5BwebPageUrl%5D%20%3D%20payload%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20dict_message%5BwebPageUrl%2B'-clientid'%5D%3D%20creds.clientID%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20encode_obj%3D%20JSON.stringify(dict_message)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20makeNewID%20%3D%20Number(new%20Date())%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20encode_obj1%20%3D%20encode_obj.replaceAll(%22tooltip%22%2C%22tooltip%22%2B%20makeNewID)%3B%0A%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20msg%20%3D%20String(encode_obj1%20)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20message%20%3D%20new%20Paho.Message(msg)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20message.destinationName%20%3D%20topic%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20message.qos%20%3D%202%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F*%20undeliveredMessages.push(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20message%3A%20message%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20onMessageDeliveredCallback%3A%20onMessageDeliveredCallback%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%20*%2F%0A%20%20%20%20%20%20%20%20%20%20%20%20client.send(message)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log(%22MQTT%3A%20Sent%20message%20to%20topic%20%5C'%22%2Btopic%2B%22%5C'%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20annotateReceivedMessage(message)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20var%20UserUploadedAnnotations%3D%20message%5BwebPageUrl%5D%3B%0A%20%20%20%20%20%20%20%20%20%20var%20AnnotationsBlock%20%3D%20document.createElement('div')%3B%0A%20%20%20%20%20%20%20%20%20%20console.log(message%5BwebPageUrl%2B%22-clientid%22%5D)%0A%20%20%20%20%20%20%20%20%20%20AnnotationsBlock.id%20%3D%22Mqtt-Annotations%22%3B%0A%20%20%20%20%20%20%20%20%20%20AnnotationsBlock.innerHTML%3D%20UserUploadedAnnotations%3B%0A%20%20%20%20%20%20%20%20%20%20console.log(UserUploadedAnnotations)%3B%0A%20%20%20%20%20%20%20%20%20%20document.body.appendChild(AnnotationsBlock)%3B%0A%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Enable%20interactivity%20for%20all%20the%20imported%20annotations%20using%20jquery%0A%20%20%20%20%20%20%20%20%20%20for(var%20dd1%3D0%3Bdd1%3CAnnotationsBlock.childNodes.length%3Bdd1%2B%2B)%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20for(var%20dd2%3D0%3Bdd2%3CAnnotationsBlock.childNodes%5Bdd1%5D.childNodes.length%3Bdd2%2B%2B)%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24('%23'%2BAnnotationsBlock.childNodes%5Bdd1%5D.childNodes%5Bdd2%5D.id).mousedown(handle_mousedown)%3B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20allows%20user%20to%20delete%20the%20imported%20annotation%20by%20clicking%20the%20right%20click%20after%20user%20confirmation%0A%20%20%20%20%20%20%20%20%20%20%20%20AnnotationsBlock.childNodes%5Bdd1%5D.addEventListener('contextmenu'%2C%20function(ev)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if(confirm(%22Are%20you%20sure%20you%20want%20to%20delete%20this%20imported%20note%3F%22))%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ev.preventDefault()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ev.target.remove()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%7D%2C%20false)%3B%0A%0A%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%2F%20End%20of%20Mqtt%20block%20%2F%2F%2F%0A%0A%20%20%20%20%20%20%20%20%2F%2F%2F%2F%2F%2F%2F%2F%20save%20annotation%20block%20%2F%2F%2F%2F%2F%2F%2F%0A%20%20%20%20%20%20%20%20%2F%2F%2F%20Saves%20the%20annotations%20to%20local%20.txt%20file%20when%20Ctrl%2B3%20is%20pressed%0A%20%20%20%20%20%20%20%20if(e.keyCode%3D%3DsaveAnnotationsKeyCode)%7B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20dict%20%3D%20%7B%7D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20grab%20all%20notes%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20allNotes%3Ddocument.getElementsByClassName(%22ui-widget-content%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20allNotes_html%20%3D%20''%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20for(var%20i%3D0%3Bi%3CallNotes.length%3Bi%2B%2B)%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20allNotes_html%2B%3D%20allNotes%5Bi%5D.outerHTML%3B%20%2F%2F%20getting%20all%20notes%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20dict%5BwebPageUrl%5D%20%3D%20allNotes_html%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20encode_obj%3D%20encodeURIComponent(JSON.stringify(dict))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20makeNewID%20%3D%20Number(new%20Date())%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20encode_obj1%20%3D%20encode_obj.replaceAll(%22tooltip%22%2C%22tooltip%22%2B%20makeNewID)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20save%20note%20%20as%20text%20file%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20hiddenElement%20%3D%20document.createElement('a')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20hiddenElement.href%20%3D%20'data%3Atext%2Ftxt%3Bcharset%3Dutf-8%2C'%20%2B%20encode_obj1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20hiddenElement.target%20%3D%20'_blank'%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20hiddenElement.download%20%3D%20'annotations'%2B%20webPageUrl%20%2B'.txt'%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20hiddenElement.click()%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%2F%2F%2F%20End%20of%20save%20annotation%20block%2F%2F%2F%0A%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%20Upload%20annotations%20block%20%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Allow%20user%20to%20upload%20annotations%20when%20the%20Ctrl%2B2%20key%20is%20pressed-%20code%20adapted%20from%20%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fhttps%3A%2F%2Fstackoverflow.com%2Fquestions%2F19038919%2Fis-it-possible-to-upload-a-text-file-to-input-in-html-js%2F19039880%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if(e.keyCode%3D%3DloadAnnotationsKeyCode)%7B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20function%20uploadText()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20new%20Promise((resolve)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20create%20file%20input1%601%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20uploader%20%3D%20document.createElement('input')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20uploader.type%20%3D%20'file'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20uploader.style.display%20%3D%20'none'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20uploader.multiple%3Dtrue%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20listen%20for%20files%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20uploader.addEventListener('change'%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20files%20%3D%20uploader.files%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(files.length)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for(var%20dd%3D0%3Bdd%3Cfiles.length%3Bdd%2B%2B)%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20reader%20%3D%20new%20FileReader()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20reader.addEventListener('load'%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20uploader.parentNode.removeChild(uploader)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resolve(reader.result)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20reader.readAsText(files%5B0%5D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20%20%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20trigger%20input%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20document.body.appendChild(uploader)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20uploader.click()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20usage%20example%0A%20%20%20%20%20%20%20%20%20%20%20%20uploadText().then(text%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fonce%20loaded%20check%20update%20the%20html%20page%20if%20the%20dictionary%20has%20the%20notes%20for%20the%20current%20URL%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20UserUploadedAnnotaions%3D%20JSON.parse(text)%5BwebPageUrl%20%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20AnnotationsBlock%20%3D%20document.createElement('div')%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20AnnotationsBlock.id%20%3D%22ImportedAnnotations%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20AnnotationsBlock.innerHTML%3DUserUploadedAnnotaions%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20document.body.appendChild(AnnotationsBlock)%3B%0A%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Enable%20interactivity%20for%20all%20the%20imported%20annoations%20using%20jquery%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20for(var%20dd1%3D0%3Bdd1%3CAnnotationsBlock.childNodes.length%3Bdd1%2B%2B)%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for(var%20dd2%3D0%3Bdd2%3CAnnotationsBlock.childNodes%5Bdd1%5D.childNodes.length%3Bdd2%2B%2B)%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24('%23'%2BAnnotationsBlock.childNodes%5Bdd1%5D.childNodes%5Bdd2%5D.id).mousedown(handle_mousedown)%3B%20%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20allows%20user%20to%20delete%20the%20imported%20annotation%20by%20clicking%20the%20right%20click%20after%20user%20confirmation%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20AnnotationsBlock.childNodes%5Bdd1%5D.addEventListener('contextmenu'%2C%20function(ev)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if(confirm(%22Are%20you%20sure%20you%20want%20to%20delete%20this%20imported%20note%3F%22))%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ev.preventDefault()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ev.target.remove()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%7D%2C%20false)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%2F%20End%20of%20upload-annotation%20block%2F%2F%2F%0A%0A%20%20%20%20%20%20%20%20%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%20Hightlight%20%2B%20Annotate%20block%20%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%0A%20%20%20%20%20%20%20%20%2F%2F%20highlight%20and%20annotate%20%20when%20Ctrl%2B1%20key%20is%20pressed%20%0A%0A%20%20%20%20%20%20%20%20if(e.keyCode%20%3D%3DcreateNoteKeyCode)%7B%20%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%20highlighting%20%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%0A%20%20%20%20%20%20%20%20%20%20%20%20if(window.getSelection().rangeCount%20%3E0)%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20selection%20%3D%20window.getSelection()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20range%20%3D%20selection.getRangeAt(0)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20newNode%20%3D%20document.createElement(%22span%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20newNode.id%20%3D%20%22popcorn%22%2Bnote_count%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20newNode.setAttribute(%22style%22%2C%20%22background-color%3A%23d9ffcc%3B%22)%3B%0A%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newNode.addEventListener('mousedown'%2C%20removeHighlight)%3B%20%0A%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20function%20removeHighlight()%7B%09%0A%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newNode.setAttribute(%22style%22%2C%20%22%22)%3B%20%20%2F%2Fremoves%20the%20highlight%0A%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20newNode.appendChild(range.extractContents())%3B%60%60%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20range.insertNode(newNode)%3B%0A%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20toggleHighlight%20%3D%20true%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%20annotate%20%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%0A%20%20%20%20%20%20%20%20%20%20%20%20if(window.getSelection().rangeCount%20%3E0)%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20newNode1%20%3D%20document.createElement(%22div%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20newNode1.classList.add(%22ui-widget-content%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20document.body.appendChild(newNode1)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20newNode1.setAttribute(%22style%22%2C%20%22display%3A%20inline-block%3Boverflow%3Aauto%3B%22)%3B%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20allows%20user%20to%20delete%20the%20imported%20annotation%20by%20clicking%20the%20right%20click%20after%20user%20confirmation%0A%20%20%20%20%20%20%20%20%20%20%20%20newNode1.addEventListener('contextmenu'%2C%20function(ev)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if(confirm(%22Are%20you%20sure%20you%20want%20to%20delete%20this%20note%3F%22))%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ev.preventDefault()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ev.target.remove()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%7D%2C%20false)%3B%0A%0A%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F*%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%2F%2F%2F%2F%2F%2F%2F%20annotation%20using%20pell%20note%20%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20with%20HTML%3A%20For%20tests%20only%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20newNode1.innerHTML%3D%20%60%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20id%3D%60%2B%22tooltip%22%2Bnote_count%20%2B%20%60%20%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20HTML%20output%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20id%3D%22html-output%22%20style%3D%22white-space%3Apre-wrap%3B%22%3E%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%60%3B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20newNode1.innerHTML%3D%20%60%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20id%3D%60%2B%22tooltip%22%2Bnote_count%20%2B%20%60%20class%3D%22pell%22%20%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%60%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20document.getElementById(%22tooltip%22%2Bnote_count).setAttribute(%22style%22%2C%22height%3A%20130px%3B%20width%3A%20250px%3B%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20border%3A%20none%3Bcolor%3A%20black%3B%20%20padding%3A%2015px%2015px%3B%20text-align%3A%20enter%3B%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20text-decoration%3A%20none%3B%20%20display%3A%20inline-block%3B%20overflow%3Aauto%3Bresize%3Aboth%3Bbackground-color%3A%22%2BdefaultNoteColor%2B%22%3Bfont-size%3A%22%2B%20defaultFont%20%2B%22%3Bopacity%3A%22%2BdefaultOpacity)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20editor%20%3D%20pell.init(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20element%3A%20document.getElementById(%22tooltip%22%2Bnote_count)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20onChange%3A%20html%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20document.getElementById('markdown-output').innerHTML%20%3D%20turndown(html)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultParagraphSeparator%3A%20'p'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20styleWithCSS%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20actions%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'bold'%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20'italic'%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20'underline'%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20'strikethrough'%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20'heading1'%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20'heading2'%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20'paragraph'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'quote'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'olist'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'ulist'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'code'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20icon%3A%20'%26%23128247%3B'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20title%3A%20'Image'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20result%3A%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20url%20%3D%20window.prompt('Enter%20the%20image%20URL')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fthis%20implemention%20is%20different%20from%20the%20pell%20documentation%20to%20account%20for%20resizing%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(url)%20document.execCommand('insertHTML'%2Cfalse%2C%20%60%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20style%3D%22%20resize%3A%20both%3B%20overflow%3Aauto%3B%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cimg%20width%3D100%25%20height%3D100%25%20src%3D%60%2Burl%2B%22%3E%3C%2Fdiv%3E%3Cbr%3E%3Cbr%3E%20%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20icon%3A%20'%26%239751%3B'%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20title%3A%20'Toggle%20color'%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20result%3A%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20userInputColor%3Dprompt(%22Enter%20color%20you%20want%20to%20set%20in%20HTML%20code%20(e.g.%20%23d9ccff%20for%20purple)%3A%22)%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log(userInputColor)%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if(document.getElementById(event.target.parentNode.parentNode.id).style.backgroundColor%3D%3D%22%23ffffcc%22)%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20document.getElementById(event.target.parentNode.parentNode.id).style.backgroundColor%3D%22%23d9ccff%22%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20icon%3A%20'%26%2310006%3B'%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20title%3A%20'Destroy%20note'%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20result%3A%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24(%20'%23'%2B%22tooltip%22%20%2B%09event.target.className.slice(-1)%20).remove()%3B%20%2F%2F%20destroys%20the%20note%0A%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24(%20'%23'%2B%22popcorn%22%20%2B%09event.target.className.slice(-1)%20).attr(%22style%22%2C%20%22%22)%3B%20%20%2F%2Fremoves%20the%20highlight%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20console.log(%22tooltip%22%20%2B%09event.target.className)%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20icon%3A%20'%26%2310154%3B'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20title%3A%20'Send%20note%20via%20mqtt'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20result%3A%20()%20%3D%3E%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sendMqttMessage(event.target.parentNode.parentNode.parentNode.outerHTML)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20classes%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20actionbar%3A%20'pell-actionbar'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20button%3A%20'pell-button'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20content%3A%20'pell-content'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20selected%3A%20'pell-button-selected'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20editor.content.innerHTML%20%3D%20'%3Cbr%3E%3Cbr%3E%3Cbr%3E%3Cbr%3E%3Cbr%3E%3Cbr%3E'%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%2F%2F%2F%2F%20popper%20js%20block%20%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20popcorn%20%3D%20document.querySelector(%22%23%22%2B%22popcorn%22%2Bnote_count)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20tooltip%20%3D%20document.querySelector('%23'%2B%22tooltip%22%2Bnote_count)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20popper_instance%20%3D%20Popper.createPopper(popcorn%2C%20tooltip%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placement%3A%20'auto'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20modifiers%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20name%3A%20'offset'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20options%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20offset%3A%20%5B0%2C%200%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20name%3A%20'eventListeners'%2C%20enabled%3A%20false%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24('%23'%2B%22tooltip%22%2Bnote_count).mousedown(handle_mousedown)%3B%20%2F%2F%20move%20popper%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%20drag%20the%20annotation%20across%20the%20document%20%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%2F%20from%20stackexchange%20-%20https%3A%2F%2Fstackoverflow.com%2Fquestions%2F38405569%2Fjquery-calling-function-to-parent-element%0A%20%20%20%20%20%20%20%20%20%20%20%20function%20handle_mousedown(e)%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20window.my_dragging%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20my_dragging.pageX0%20%3D%20e.pageX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20my_dragging.pageY0%20%3D%20e.pageY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20my_dragging.elem%20%3D%20this%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20my_dragging.offset0%20%3D%20%24(this).offset()%3B%0A%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20function%20handle_dragging(e)%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if(e.shiftKey)%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20left%20%3D%20my_dragging.offset0.left%20%2B%20(e.pageX%20-%20my_dragging.pageX0)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20top%20%3D%20my_dragging.offset0.top%20%2B%20(e.pageY%20-%20my_dragging.pageY0)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24(my_dragging.elem)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.offset(%7Btop%3A%20top%2C%20left%3A%20left%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20function%20handle_mouseup(e)%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24('body')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.off('mousemove'%2C%20handle_dragging)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.off('mouseup'%2C%20handle_mouseup)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24('body')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.on('mouseup'%2C%20handle_mouseup)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.on('mousemove'%2C%20handle_dragging)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20note_count%2B%3D1%3B%20%2F%2F%20update%20note%20counter%20%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%2F%2F%2F%20End%20of%20Hightlight%20%2B%20Annotate%20block%20%20%2F%2F%2F%0A%20%20%20%20%7D%20%0A%7D%7D)()%3B
